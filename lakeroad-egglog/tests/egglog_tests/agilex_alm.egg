(include "egglog_src/lakeroad.egg")

; wire declarations
; a
(let v0 (Wire "v0" 1))
; b
(let v1 (Wire "v1" 1))
; c1
(let v2 (Wire "v2" 1))
; d1
(let v3 (Wire "v3" 1))
; $flatten\lut4_g1.$shr$misc/agilex_alm.sv:100$12_Y
(let v4 (Wire "v4" 16))
(let v5 (Extract 0 0 v4))
; lut4_g1_mem
(let v6 (Wire "v6" 16))
; $flatten\lut4_p1.$shr$misc/agilex_alm.sv:100$12_Y
(let v7 (Wire "v7" 16))
(let v8 (Extract 0 0 v7))
; lut4_p1_mem
(let v9 (Wire "v9" 16))
; c0
(let v10 (Wire "v10" 1))
; d0
(let v11 (Wire "v11" 1))
; $flatten\lut4_g0.$shr$misc/agilex_alm.sv:100$12_Y
(let v12 (Wire "v12" 16))
(let v13 (Extract 0 0 v12))
; lut4_g0_mem
(let v14 (Wire "v14" 16))
; $flatten\lut4_p0.$shr$misc/agilex_alm.sv:100$12_Y
(let v15 (Wire "v15" 16))
(let v16 (Extract 0 0 v15))
; lut4_p0_mem
(let v17 (Wire "v17" 16))
; $ternary$misc/agilex_alm.sv:83$11_Y
(let v18 (Wire "v18" 1))
; $or$misc/agilex_alm.sv:83$10_Y
(let v19 (Wire "v19" 1))
; $and$misc/agilex_alm.sv:83$9_Y
(let v20 (Wire "v20" 1))
; $and$misc/agilex_alm.sv:83$8_Y
(let v21 (Wire "v21" 1))
; $xor$misc/agilex_alm.sv:81$7_Y
(let v22 (Wire "v22" 1))
; $ternary$misc/agilex_alm.sv:81$6_Y
(let v23 (Wire "v23" 1))
; $xor$misc/agilex_alm.sv:79$5_Y
(let v24 (Wire "v24" 1))
; $ternary$misc/agilex_alm.sv:77$4_Y
(let v25 (Wire "v25" 1))
; $ternary$misc/agilex_alm.sv:76$3_Y
(let v26 (Wire "v26" 1))
; $ternary$misc/agilex_alm.sv:76$2_Y
(let v27 (Wire "v27" 1))
; $ternary$misc/agilex_alm.sv:75$1_Y
(let v28 (Wire "v28" 1))
; cin
(let v29 (Wire "v29" 1))
; f
(let v30 (Wire "v30" 1))
; e
(let v31 (Wire "v31" 1))

; cells
(union v18 (Op3 (Mux) v21 v19 v29))
(union v19 (Op2 (Or) v20 v5))
(union v20 (Op2 (And) v8 v13))
(union v21 (Op2 (And) v16 v8))
(union v22 (Op2 (Xor) v23 v8))
(union v23 (Op3 (Mux) v16 v29 v13))
(union v24 (Op2 (Xor) v16 v29))
(union v25 (Op3 (Mux) v30 v8 v5))
(union v26 (Op3 (Mux) v30 v27 v28))
(union v27 (Op3 (Mux) v31 v8 v5))
(union v28 (Op3 (Mux) v31 v16 v13))
; { \a \b \c1 \d1 }
(let v32 (Concat v3 v2))
(let v33 (Concat v32 v1))
(let v34 (Concat v33 v0))
; TODO not handling signedness
(let v35 (ZeroExtend v34 16))
(union v4 (Op2 (Shr) v6 v35))
(union v7 (Op2 (Shr) v9 v35))
; { \a \b \c0 \d0 }
(let v36 (Concat v11 v10))
(let v37 (Concat v36 v1))
(let v38 (Concat v37 v0))
; TODO not handling signedness
(let v39 (ZeroExtend v38 16))
(union v12 (Op2 (Shr) v14 v39))
(union v15 (Op2 (Shr) v17 v39))

; inputs
(let lut4_g1_mem (Var "lut4_g1_mem" 16))
(union v6 lut4_g1_mem)
(let lut4_p1_mem (Var "lut4_p1_mem" 16))
(union v9 lut4_p1_mem)
(let lut4_g0_mem (Var "lut4_g0_mem" 16))
(union v14 lut4_g0_mem)
(let lut4_p0_mem (Var "lut4_p0_mem" 16))
(union v17 lut4_p0_mem)
(let cin (Var "cin" 1))
(union v29 cin)
(let f (Var "f" 1))
(union v30 f)
(let e (Var "e" 1))
(union v31 e)
(let d1 (Var "d1" 1))
(union v3 d1)
(let d0 (Var "d0" 1))
(union v11 d0)
(let c1 (Var "c1" 1))
(union v2 c1)
(let c0 (Var "c0" 1))
(union v10 c0)
(let b (Var "b" 1))
(union v1 b)
(let a (Var "a" 1))
(union v0 a)

; outputs
(let sumout1 v22)
(let sumout0 v24)
(let cout v18)
(let lut6out v26)
(let lut5out1 v25)
(let lut5out0 v28)

; delete wire expressions
(delete (Wire "v0" 1))
(delete (Wire "v1" 1))
(delete (Wire "v2" 1))
(delete (Wire "v3" 1))
(delete (Wire "v4" 16))
(delete (Wire "v6" 16))
(delete (Wire "v7" 16))
(delete (Wire "v9" 16))
(delete (Wire "v10" 1))
(delete (Wire "v11" 1))
(delete (Wire "v12" 16))
(delete (Wire "v14" 16))
(delete (Wire "v15" 16))
(delete (Wire "v17" 16))
(delete (Wire "v18" 1))
(delete (Wire "v19" 1))
(delete (Wire "v20" 1))
(delete (Wire "v21" 1))
(delete (Wire "v22" 1))
(delete (Wire "v23" 1))
(delete (Wire "v24" 1))
(delete (Wire "v25" 1))
(delete (Wire "v26" 1))
(delete (Wire "v27" 1))
(delete (Wire "v28" 1))
(delete (Wire "v29" 1))
(delete (Wire "v30" 1))
(delete (Wire "v31" 1))